@{
    ViewBag.Title = "All Projects";
    Layout = "~/Views/Shared/_CmLayout.cshtml";
}

@section Styles {
    <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet" />

    <style>
        .card-body {
            overflow: hidden;
        }

        /* 🔥 THIS WRAPPER CONTROLS SCROLL */
        .table-scroll {
            width: 100%;
            overflow-x: auto;
        }

        table.dataTable thead th {
            background: #029e9d;
            color: #fff;
            text-align: center;
        }

        #projectTable td {
            text-align: center;
            vertical-align: middle;
            white-space: normal; /* text wrap allowed */
        }

        #projectTable th,
        #projectTable td {
            font-size: 11px;             
        }

        .design{
            width:50px;
        }
    </style>

}

<div class="card">
    <div class="card-body">

        <div class="d-flex justify-content-between">

        <h5 class="mb-3 fw-bold">All Project Lists</h5>
        <select class="form-select-sm">
            <option value="value">Filter by year</option>
                @{
                    for(int i = 2025; i >= 2020; i--)
                    {
                        <option>@i</option>
                    }
                }
        </select>
        </div>

        <hr />

        <!-- 🔥 ONLY THIS WRAPPER -->
        <div class="table-scroll">
            <table id="projectTable" class="table table-bordered">
                <thead>
                    <tr>
                        <th>SN.</th>
                        <th>Project Code</th>
                        <th>Project Name</th>
                        <th>Project Manager</th>
                        <th class="design">Assign Date</th>
                        <th class="design">Start Date</th>
                        <th class="design">Completion Date</th>
                        <th class="design">Physical %</th>
                        <th class="design">Financial %</th>
                        <th class="design">Overall %</th>
                        <th>Status</th>

                    </tr>
                </thead>

                <tbody>
                    @for (int i = 1; i <= 30; i++)
                    {
                        <tr>
                            <td>@i</td>
                            <td>
                                <a href="/Cm/ProjectDetails"
                                   class="fw-semibold text-primary text-decoration-none">
                                    PRJ-001
                                </a>
                            </td>

                            <td>
                                Remote Sensing and GIS Based Monitoring Project
                            </td>
                            <td>Manager @i</td>
                            <td>01-01-2025</td>
                            <td>05-01-2025</td>
                            <td>30-06-2025</td>
                            <td>60%</td>
                            <td>55%</td>
                            <td>58%</td>
                            <td>
                                <span class="badge bg-warning">Ongoing</span>
                            </td>

                        </tr>
                    }
                </tbody>
            </table>
        </div>

    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

<script>
    $(document).ready(function () {
        $('#projectTable').DataTable({
            paging: true,
            pageLength: 5,
            lengthMenu: [5, 10, 25, 50],
            searching: true,
            ordering: true,
            autoWidth: false,
            scrollX: false   // ❌ NEVER use with wrapper
        });
    });
</script>
