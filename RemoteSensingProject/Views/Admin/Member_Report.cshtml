
@{
    ViewBag.Title = "Member_Report";
    Layout = "~/Views/Shared/_adminLayout.cshtml";
}


@{
    ViewBag.Title = "Employee_Registration";
    Layout = "~/Views/Shared/_adminLayout.cshtml";
}

<style>
    .modal-body .sliderimages img {
        width: 20% !important;
        height: 20%;
        border-radius: 10px;
    }

    .link-icon {
        height: 16px;
    }
    /* Custom button styling */
    .dt-button {
        font-size: 14px !important;
        padding: 10px 20px !important;
        border-radius: 4px !important;
        border: none !important;
        cursor: pointer !important;
        margin-right: 5px !important;
        display: inline-block !important;
        font-weight: 600 !important;
        transition: all 0.3s ease-in-out !important;
    }

        /* Excel button (Green) */
        .dt-button.buttons-excel {
            background-color: #3b9f42 !important; /* Excel-like green */
            color: white !important;
        }

            .dt-button.buttons-excel:hover {
                background-color: #2a7c2f !important; /* Darker green on hover */
            }

        /* PDF button (Red) */
        .dt-button.buttons-pdf {
            background-color: #e74c3c !important; /* PDF-like red */
            color: white !important;
        }

            .dt-button.buttons-pdf:hover {
                background-color: #c0392b !important; /* Darker red on hover */
            }

    /* Additional styling for the buttons wrapper */
    .dataTables_wrapper .dt-buttons {
        margin-bottom: 10px !important;
    }
</style>

<div class="search-box p-4 bg-white rounded mb-3 box-shadow">
    <form class="forms-sample">
        <div class="row align-items-center">
            <div class="col-lg-2">
                <h5>Employee Lists</h5>
            </div>
            <div class="col-lg-6 col-md-6">
                <input type="text" placeholder="Search by employee name" class="form-control" id="filterByEmployeeName">
            </div>
            <div class="col-lg-4 col-md-6">
                <select class="form-select form-select-lg" id="fileterByEmployeeDiv">
                    <option selected value="">-- Select Divison --</option>
                    @foreach(var item in ViewBag.DivisonList as List<RemoteSensingProject.Models.Admin.main.CommonResponse>)
            {
                        <option>@item.name</option>
            }
                </select>
            </div>
          
        </div>
    </form>
</div>
<div class="row">
    <div class="col-md-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table id="dataTableExamples" class="table table-striped">
                        <thead>
                            <tr>
                                <th class="text-center">ID</th>
                                <th>Employee Code</th>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Divison</th>
                                <th class="text-center">Status</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if(ViewBag.MemberList!=null){
                                            int count = 1;
                                            foreach (var item in ViewBag.MemberList as List<RemoteSensingProject.Models.Admin.main.Employee_model>)
                                            {
                                <tr>
                                    <td class="text-start">@count</td>
                                    <td>@item.EmployeeCode</td>
                                    <td class="w-25">
                                        <img src="@item.Image_url" alt="image">
                                    </td>
                                    <td>@item.EmployeeName</td>
                                    <td>@item.DevisionName</td>
                                    <td class="text-center">
                                        <span class="form-check form-switch"><input type="checkbox" class="form-check-input activeSwitch" data-id="@item.Id" checked="@item.ActiveStatus"></span>
                                    </td>
                                    <td class="text-center">
                                        <ul class="d-flex list-unstyled mb-0 justify-content-center">
                                            <li class="me-2">
                                                <a data-id="@item.Id" class="showEmployeeProfile" data-bs-toggle="modal" data-bs-target="#viewslider"><i class="link-icon" data-feather="eye"></i></a>

                                            </li>

                                        </ul>
                                    </td>
                                </tr>
                                    count++;
                                }
                            }

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addslider" tabindex="-1" aria-labelledby="addslider" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h5 class="modal-title" id="exampleModalLabel">Add Employee</h5>
            </div>
            <div class="modal-body">
                <form class="forms-sample">
                    <div class="row">
                        <div class="mb-3 col-md-6">
                            <label for="subtitle" class="form-label"> Employee Name</label>
                            <input type="text" class="form-control" id="subtitle" autocomplete="off" placeholder="Enter Employee Name">
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="title" class="form-label">Mobile</label>
                            <input type="text" class="form-control" id="title" placeholder="Enter Mobile">
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="title" class="form-label">Email</label>
                            <input type="text" class="form-control" id="title" placeholder="Enter Email">
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="description" class="form-label">Select Role</label>
                            <select class="form-select form-select-lg">
                                <option selected>Select Role</option>
                                <option value="1">Sub Admin</option>
                                <option value="2">Project Manager</option>
                                <option value="3">Sub Co-ordinate</option>
                            </select>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="description" class="form-label">Select Department</label>
                            <select class="form-select form-select-lg">
                                <option selected>Select Department</option>
                                <option value="1">Department1</option>
                                <option value="2">Department2</option>
                                <option value="3">Department3</option>
                            </select>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="description" class="form-label">Select Designation</label>
                            <select class="form-select form-select-lg">
                                <option selected>Select Designation</option>
                                <option value="1">Designation1</option>
                                <option value="2">Designation2</option>
                                <option value="3">Designatio3</option>
                            </select>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="gender" class="form-label">Gender</label>
                            <div id="gender">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="male" value="male">
                                    <label class="form-check-label" for="male">Male</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="female" value="female">
                                    <label class="form-check-label" for="female">Female</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="other" value="other">
                                    <label class="form-check-label" for="other">Other</label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="description" class="form-label">Address</label>
                            <input type="number" class="form-control" id="password" autocomplete="off" placeholder="Enter Address">
                        </div>

                        <div class="mb-3 col-md-6">
                            <label for="title" class="form-label">UserName</label>
                            <input type="text" class="form-control" id="title" placeholder="Enter UserName">
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="title" class="form-label">Password</label>
                            <input type="password" class="form-control" id="title" placeholder="Enter Password">
                        </div>

                        <div class="mb-3 col-md-6">
                            <label for="upload" class="form-label">Upload Images</label>
                            <input class="form-control" type="file" id="upload">
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="upload" class="form-label">Upload Adhar Card</label>
                            <input class="form-control" type="file" id="upload">
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary"><i class="link-icon" data-feather="plus"></i> Add Employee</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewslider" tabindex="-1" aria-labelledby="viewslider" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <!-- Slider Images and Title -->
                <div class="sliderimages mb-3" style=" text-align: center; ">
                    <img src="~/ProjectContent/Admin/Employee_Images/img.png" class="employeeProfileImage rounded-circle" alt="sliderimages">
                    <h5 class="mb-1 EmployeeName">Harsh Agarwal</h5>

                </div>
                <!-- Static Information Start -->
                <div class="mt-4">
                    <div class="row">
                        <div class="mb-3 col-md-6">
                            <label for="employeeName" class="form-label">Employee Name</label>
                            <p class="EmployeeName">Harsh Agarwal</p>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="mobile" class="form-label">Mobile</label>
                            <p class="mobileNumber">9876543210</p>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <p class="empEmail">harsh@example.com</p>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="role" class="form-label">Role</label>
                            <p class="empRole">Project Manager</p>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="department" class="form-label">Department</label>
                            <p class="empDivision">Department1</p>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="designation" class="form-label">Designation</label>
                            <p class="empDesignation">Designation2</p>
                        </div>
                        <div class="mb-3 col-md-6">
                            <label for="gender" class="form-label">Gender</label>
                            <p class="empgender">Male</p>
                        </div>  <div class="mb-3 col-md-6">
                            <label for="gender" class="form-label">Active Status</label>
                            <p class="empActiveStatus"></p>
                        </div>

                    </div>
                </div>
                <!-- Static Information End -->
            </div>
        </div>
    </div>
</div>
<script>
    function showLoading(action) {
        Swal.fire({
            title: "Please Wait..!",
            text: "Request are under process.",
            allowOutsideClick: false,
            allowEscapeKey: false,
            didOpen: () => {
                Swal.showLoading();
            }
        });
        if (!action) {
            Swal.close();
        }
    }
    $(".activeSwitch").on('change', function () {
        let id = $(this).attr("data-id")
        $.ajax({
            url: "/admin/ChangeActieStatus",
            type: "get",
            data: { id: id },
            success: function (res) {
                if (!res) {
                    Swal.fire({
                        title: "error",
                        text: "something went wrong",
                        icon: "error"
                    })
                }
            }, error: function (xhr) {
                Swal.fire({
                    title: "error",
                    text: "something went wrong",
                    icon: "error"
                })
            }
        })
    })

    $(".showEmployeeProfile").click(function () {
        showLoading(true)
        let id = $(this).attr("data-id");
        $.ajax({
            url: "/admin/SelectEmployeeRecordById",
            type: "get",
            data: { id: id },
            success: function (res) {
                if (res != null) {

                    $(".employeeProfileImage").attr("src", res.Image_url)
                    $(".EmployeeName").text(res.EmployeeName)
                    $(".mobileNumber").text(res.MobileNo)
                    $(".empEmail").text(res.Email)
                    $(".empRole").text(res.EmployeeRole)
                    $(".empDivision").text(res.DevisionName)
                    $(".empDesignation").text(res.DesignationName)
                    $(".empgender").text(res.Gender)
                    $(".empActiveStatus").html(res.ActiveStatus ? "<i class='fa-solid text-success fa-circle'></i> Active" : "<i class='fa-solid text-danger fa-circle'></i> Deactive")
                }
                showLoading(false)

            }, error: function (xhr) {
                Swal.fire({
                    title: "error",
                    text: "something went wrong",
                    icon: "error"
                })
            }
        })
    })


    $(document).ready(function () {
        $("#filterByEmployeeName").on("input", function () {
            var table = $("#dataTableExamples").DataTable();
            table.column(3).search($(this).val()).draw();
        })
        $("#fileterByEmployeeDiv").on("change", function () {
            var table = $("#dataTableExamples").DataTable();
            table.column(4).search($(this).val()).draw();
        })

        $('#dataTableExamples').DataTable({
            layout: {
                topStart: {
                    buttons: [ 'excel', 'pdf' ]
                }
            }
        });
      
       
    })
</script>

