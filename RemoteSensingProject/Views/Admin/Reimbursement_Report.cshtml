
@{
    ViewBag.Title = "Reimbursement_Report";
    Layout = "~/Views/Shared/_adminLayout.cshtml";
    var empData = ViewData["totalProjectManager"] as List<RemoteSensingProject.Models.Admin.main.Employee_model>;
    var reportData = ViewData["totalReinursementReport"] as List<RemoteSensingProject.Models.Admin.main.AdminReimbursement>;
}

<style>
    .dt-button {
        font-size: 14px !important;
        padding: 10px 20px !important;
        border-radius: 4px !important;
        border: none !important;
        cursor: pointer !important;
        margin-right: 5px !important;
        display: inline-block !important;
        font-weight: 600 !important;
        transition: all 0.3s ease-in-out !important;
    }

        .dt-button.buttons-excel {
            background-color: #3b9f42 !important; /* Excel-like green */
            color: white !important;
        }

            .dt-button.buttons-excel:hover {
                background-color: #2a7c2f !important; /* Darker green on hover */
            }

        /* PDF button (Red) */
        .dt-button.buttons-pdf {
            background-color: #e74c3c !important; /* PDF-like red */
            color: white !important;
        }

            .dt-button.buttons-pdf:hover {
                background-color: #c0392b !important; /* Darker red on hover */
            }

    /* Additional styling for the buttons wrapper */
    .dataTables_wrapper .dt-buttons {
        margin-bottom: 10px !important;
    }

    .dt-search {
        float: right;
        margin-bottom: 5px !important;
    }
</style>
<div class="card my-1">
    <div class="card-body">
        <div class="row">
            <div class="col-sm-4">
                <select class="form-select form-select-sm" id="filterByProjectManager">
                    <option value="" selected>Filter by Project Manager</option>
                    @if (empData.Any()) { 
                    foreach(var item in empData)
                {
                    <option>@item.EmployeeName (@item.EmployeeCode)</option>
                }
                    }
                </select>

            </div>

            <div class="col-sm-4">
                <select class="form-select form-select-sm" id="filterByprojectType">
                    <option value="" selected>Filter by request type</option>
                    <option value="contigency">Contigency</option>
                    <option value="pi_adjustment">P.I. Adjustment</option>
                </select>

            </div>

            <div class="col-sm-4">
                <select class="form-select form-select-sm" id="fileterByProjectStatus">
                    <option value="" selected>Filter by status</option>
                    <option>Approved</option>
                    <option>Rejected</option>
                    <option>Pending</option>
                </select>

            </div>



        </div>
    </div>
</div>


<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover" id="reibursementReportTable">
                <thead>
                    <tr>
                        <th>Sr. No</th>
                        <th>Project Manager</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @if(reportData != null)
            {
                        int i = 1;
                foreach(var item in reportData)
                {
                    <tr>
                        <td>@i</td>
                        <td>@item.EmpName</td>
                        <td>@item.type</td>
                        <td>@item.amount</td>
                        <td>
                            @if (item.appr_status && !item.newRequest)
                            {
                                <span class="badge bg-success">Approved</span>
                            }
                            else if (!item.newRequest && !item.appr_status)
                            {
                                <span class="badge bg-danger">Rejected</span>
                            }
                            else
                            {
                                <span class="badge bg-primary">Pending</span>

                            }

                                            </td>
                    </tr>

                            i++;
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        
        $("#reibursementReportTable").DataTable({
            layout: {
                topStart: {
                    buttons: ['excel', 'pdf']
                }
            }
        });


        $("#filterByProjectManager").on("change", function () {
            let table = $("#reibursementReportTable").DataTable();
            table.column(1).search($(this).val()).draw();
        })

        $("#filterByprojectType").on("change", function () {
            let table = $("#reibursementReportTable").DataTable();
            table.column(2).search($(this).val()).draw();
        })

        $("#fileterByProjectStatus").on("change", function () {
            let table = $("#reibursementReportTable").DataTable();
            table.column(4).search($(this).val()).draw();
        })


    })
</script>